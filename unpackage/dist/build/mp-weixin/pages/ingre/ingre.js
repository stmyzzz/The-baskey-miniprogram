(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/ingre/ingre"],{"09f7":function(t,o,n){"use strict";(function(t,e){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var r=n("2f62");function a(t,o){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);o&&(e=e.filter((function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable}))),n.push.apply(n,e)}return n}function i(t){for(var o=1;o<arguments.length;o++){var n=null!=arguments[o]?arguments[o]:{};o%2?a(Object(n),!0).forEach((function(o){c(t,o,n[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))}))}return t}function c(t,o,n){return o in t?Object.defineProperty(t,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[o]=n,t}var s=function(){n.e("components/buyCart").then(function(){return resolve(n("c712"))}.bind(null,n)).catch(n.oe)},u={data:function(){return{sortlist:["食物类别","酱油类别","奶制品","厨具类别"],currentSort:"食物类别",foods:{},user_id:null,showLoading:!0,cartFoodList:[],totalPrice:null,cartNum:null,iscartList:!1}},created:function(){this.initCart(),console.log("created")},components:{buyCart:s},onLoad:function(){var t=this.currentSort;this.getSort(t)},onShow:function(){console.log("我触发了"),this.user_id=t.getStorageSync("user_id"),this.initCart()},computed:i(i({},(0,r.mapState)(["cartList"])),{},{shopCart:function(){return i({},this.cartList)}}),methods:i(i({},(0,r.mapMutations)(["initCart"])),{},{initCartList:function(){var t=this,o=this;console.log("我执行了");var n=[],r=0,a=0;this.totalPrice=0,this.cartNum=0,this.cartFoodList=[],console.log("shopCart1",this.shopCart);var i=this.user_id,c=this.shopCart;e.callFunction({name:"getCart",data:{user_id:i}}).then((function(n){console.log("hasCart",n),console.log("this.shopCart",t.shopCart),n.result.data.length?(o.shopCart=n.result.data[0].cart_infor,console.log(" this.shopCart",o.shopCart),console.log("长度存在"),e.callFunction({name:"updateCart",data:{user_id:i,cart_infor:c}}).then((function(o){console.log(o.result.data),t.sourceList=o.result.data}))):e.callFunction({name:"addCart",data:{user_id:i,cart_infor:c}}).then((function(o){console.log(o.result.data),t.sourceList=o.result.data}))})),Object.keys(this.shopCart).forEach((function(o,e){if(console.log("item",o),t.shopCart&&t.shopCart[o]){var i=t.shopCart[o];a+=i.food_num,t.totalPrice+=i.food_price*i.food_num,console.log("totalPrice",t.totalPrice),t.cartNum+=i.food_num,console.log("totalPrice",t.totalPrice),i.food_num>0&&(t.cartFoodList[r]={},t.cartFoodList[r]._id=i._id,t.cartFoodList[r].food_name=i.food_name,t.cartFoodList[r].food_price=i.food_price,t.cartFoodList[r].food_num=i.food_num,r++),console.log("cartFoodList",t.cartFoodList),n[e]=a}else n[e]=0}))},getSort:function(o){var n=this;t.showLoading({title:"加载中...",mask:!1}),this.currentSort=o;var r=this.currentSort;e.callFunction({name:"getFoods",data:{food_sort:r}}).then((function(o){console.log("this.foods",o.result.data),n.foods=o.result.data,t.hideLoading()})),console.log("渲染完成"),this.showLoading=!1},goBuy:function(){t.navigateTo({url:"/pages/buylist/buylist"})},goingreDetail:function(o){t.navigateTo({url:"/pages/ingreDetail/ingreDetail?id=".concat(o)})}}),watch:{shopCart:function(t){this.initCartList()}}};o.default=u}).call(this,n("543d")["default"],n("a9ff")["default"])},"18b5":function(t,o,n){"use strict";var e=n("7e56"),r=n.n(e);r.a},"5d6a":function(t,o,n){"use strict";n.r(o);var e=n("7c03"),r=n("a962");for(var a in r)"default"!==a&&function(t){n.d(o,t,(function(){return r[t]}))}(a);n("18b5");var i,c=n("f0c5"),s=Object(c["a"])(r["default"],e["b"],e["c"],!1,null,null,null,!1,e["a"],i);o["default"]=s.exports},"7c03":function(t,o,n){"use strict";var e;n.d(o,"b",(function(){return r})),n.d(o,"c",(function(){return a})),n.d(o,"a",(function(){return e}));var r=function(){var t=this,o=t.$createElement;t._self._c;t._isMounted||(t.e0=function(o){t.iscartList=!1},t.e1=function(o){t.iscartList=!t.iscartList})},a=[]},"7e56":function(t,o,n){},"8f89":function(t,o,n){"use strict";(function(t){n("32e7");e(n("66fd"));var o=e(n("5d6a"));function e(t){return t&&t.__esModule?t:{default:t}}t(o.default)}).call(this,n("543d")["createPage"])},a962:function(t,o,n){"use strict";n.r(o);var e=n("09f7"),r=n.n(e);for(var a in e)"default"!==a&&function(t){n.d(o,t,(function(){return e[t]}))}(a);o["default"]=r.a}},[["8f89","common/runtime","common/vendor"]]]);